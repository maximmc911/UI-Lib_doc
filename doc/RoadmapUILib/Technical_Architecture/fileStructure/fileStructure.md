

[назад](../Technical_Architecture.md)

Конечно! Вот расширенное и ещё более подробное описание оптимальной файловой структуры UI-библиотеки с конкретными рекомендациями по организации тестов, которые удобно включить в документацию:

---

## Файловая структура проекта

Для удобства поддержки, масштабируемости и удобного развития, UI-библиотека организована по принципу модульности и ответственности. Каждый тип сущностей (компоненты, хуки, утилиты и пр.) выделен в отдельную папку. Это облегчает навигацию, тестирование, локализацию багов и ускоряет onboarding новых разработчиков.

```
src/
├── components/             # React UI-компоненты
│   ├── Button/                # Компонент Button и всё, что с ним связано
│   │   ├── Button.tsx            # Логика и JSX компонента
│   │   ├── Button.styles.ts      # Стили компонента (CSS-in-JS / CSS Modules / SCSS)
│   │   ├── Button.test.tsx       # Юнит-тесты компонента с использованием Jest + React Testing Library
│   │   ├── Button.types.ts       # (Опционально) Типы и интерфейсы компонента
│   │   └── index.ts              # Баррельный экспорт для удобного импорта
│   ├── Input/                 # Аналогично Button
│   └── index.ts               # Главный экспорт всех компонентов (re-export)
├── hooks/                  # Кастомные React-хуки
│   ├── useToggle.ts             # Пример кастомного хука
│   ├── useDebounce.ts           # Хук с дебаунсом
│   ├── useFetch.ts              # Хук для запросов (если есть)
│   └── index.ts                 # Экспорт всех хуков
├── utils/                  # Чисто функциональный вспомогательный код
│   ├── colors.ts                # Цветовые палитры и функции для работы с цветом
│   ├── helpers.ts               # Общие функции, например форматирование дат, генерация классов и др.
│   └── index.ts                 # Главный экспорт утилит
├── themes/                 # Темы для стилизации (объекты с цветами, отступами и пр.)
│   ├── lightTheme.ts            # Светлая тема
│   ├── darkTheme.ts             # Тёмная тема
│   └── index.ts                 # Экспорт тем
├── styles/                 # Глобальные стили, CSS reset, переменные
│   └── globals.css
├── types/                  # Общие TypeScript типы, интерфейсы, типы пропсов
│   └── index.ts
├── constants/              # Константы для всей библиотеки (размеры, цвета, тайминги)
│   └── index.ts
├── index.ts                # Главная точка входа библиотеки — экспорт всех сущностей
```

---

### Детальное описание папок

#### `components/`

* Каждый компонент помещён в собственную папку, содержащую:

  * `.tsx` — основная реализация компонента.
  * `.styles.ts` (или аналог) — стили компонента, чтобы логика и стили были отделены.
  * `.test.tsx` — тесты компонента.
  * `.types.ts` — определение типов и интерфейсов (если требуется).
  * `index.ts` — экспорт компонента, чтобы импорт выглядел так:
    `import { Button } from 'ui-library-name/components';`
* Такой подход помогает инкапсулировать всё, что относится к конкретному компоненту, вместе.

#### `hooks/`

* Здесь хранятся переиспользуемые хуки.
* Каждый хук — отдельный файл с описанием.
* Есть `index.ts` для удобного экспорта всех хуков из одной точки.

#### `utils/`

* Чистые функции, не зависящие от React, которые могут использоваться как внутри библиотеки, так и пользователями.
* Включают работу с цветами, форматирование, генерацию классов и другие вспомогательные задачи.

#### `themes/`

* Объекты с настройками цветов, отступов, шрифтов и других параметров для темизации.
* Темы можно подключать через `ThemeProvider` или аналогичные механизмы.

#### `styles/`

* Глобальные стили и CSS reset.
* Переменные, которые не привязаны к конкретным компонентам (например, CSS Custom Properties).

#### `types/`

* Общие типы и интерфейсы, используемые в нескольких местах.
* Позволяет избегать дублирования и держать типы централизованными.

#### `constants/`

* Различные константы, например, размеры, тайминги анимаций, значения по умолчанию.

#### `index.ts`

* Главная точка входа, откуда экспортируются все компоненты, хуки, утилиты и темы.
* Обеспечивает удобный импорт для пользователей библиотеки.

---

## Рекомендации по организации тестов

Тесты — важнейшая часть любой UI-библиотеки для поддержания стабильности и качества кода.

### Основные принципы:

* **Тесты размещаются рядом с кодом компонента** в папке компонента с суффиксом `.test.tsx` (или `.spec.tsx`).
* Используется **Jest** как тестовый раннер и **React Testing Library** для тестирования React-компонентов.
* Каждый компонент должен иметь:

  * Юнит-тесты, проверяющие рендер, базовое поведение, props.
  * Тесты интерактивности (клики, ввод, фокус и т.д.).
  * Тесты на корректное применение стилей и классов (если применимо).
* Для хуков пишутся отдельные тесты с помощью `@testing-library/react-hooks` или собственных утилит.
* Тесты должны быть изолированы, не завися от внешних API или состояний.
* Для утилит — простые юнит-тесты проверяют логику и граничные случаи.

### Пример структуры тестов внутри компонента Button:

```
src/components/Button/
├── Button.tsx
├── Button.styles.ts
├── Button.test.tsx
├── Button.types.ts
└── index.ts
```

### Пример базового теста для Button (`Button.test.tsx`):

```tsx
import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import { Button } from './Button';

describe('Button', () => {
  test('рендерится с правильным текстом', () => {
    render(<Button>Тестовая кнопка</Button>);
    expect(screen.getByText('Тестовая кнопка')).toBeInTheDocument();
  });

  test('вызывает onClick при клике', () => {
    const onClick = jest.fn();
    render(<Button onClick={onClick}>Нажми меня</Button>);
    fireEvent.click(screen.getByText('Нажми меня'));
    expect(onClick).toHaveBeenCalledTimes(1);
  });

  test('применяет класс disabled', () => {
    render(<Button disabled>Отключено</Button>);
    expect(screen.getByText('Отключено')).toHaveAttribute('disabled');
  });
});
```

### Тесты хуков (`useToggle.test.ts`):

```ts
import { renderHook, act } from '@testing-library/react-hooks';
import { useToggle } from './useToggle';

test('useToggle переключает значение', () => {
  const { result } = renderHook(() => useToggle(false));
  
  expect(result.current[0]).toBe(false);
  
  act(() => {
    result.current[1]();
  });
  
  expect(result.current[0]).toBe(true);
});
```

---

### Дополнительные советы по тестированию

* Пишите тесты сразу при добавлении нового компонента/хука.
* Используйте **coverage** для контроля покрытия тестами.
* Настройте автоматический запуск тестов в CI/CD.
* Интеграционные и e2e-тесты можно вынести в отдельные папки и запускать отдельно.

---
